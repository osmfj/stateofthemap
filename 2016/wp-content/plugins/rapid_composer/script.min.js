window.bt_rc_map={};window.bt_rc_map_primary={};window.bt_rc_map_secondary={};(function(t){t(document).ready(function(){window.bt_rc_mouse={};window.bt_rc_drag_item=null;if(t("#bt_rc").length>0){if(window.bt_rc_data.children.length>0){if(window.bt_rc_map[window.bt_rc_data.children[0].base]===undefined||window.bt_rc_map[window.bt_rc_data.children[0].base].root!==true){window.bt_rc_data.children=[];window.bt_rc.is_rc_content=false}}}if(t("#postdivrich").length>0&&t("#bt_rc").length>0){t("#postdivrich").before('<div id="bt_rc_editor_toolbar"><button type="button" class="button bt_rc_switch_editor">'+window.bt_rc_text.switch_editor+"</button></div>");if(window.bt_rc.is_rc_content){window.bt_rc.editor="rc";t("#postdivrich").addClass("bt_rc_hidden");t("#bt_rc_editor_toolbar").addClass("bt_rc_is_rc_editor")}else{window.bt_rc.editor="wp";t("#rapid_composer_sectionid").hide()}}t("#publish").on("click",function(t){if(window.bt_rc.editor=="rc"){window.bt_rc_action="update_wp_editor";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}});t("#post-preview").on("click",function(t){if(window.bt_rc.editor=="rc"){window.bt_rc_action="update_wp_editor";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}});window.bt_rc_item_mousedown=function(){t(".bt_rc_item").each(function(){t(this).unbind("mousedown");t(this).on("mousedown",function(_){_.stopPropagation();var r=this.getBoundingClientRect();var i=_.clientX-r.left;var e=_.clientY-r.top;window.bt_rc_mouse.initOffsetX=i;window.bt_rc_mouse.initOffsetY=e;window.bt_rc_action=null;window.bt_rc_drag_item=t(this);t(".bt_rc_toolbar_tools_visible").removeClass("bt_rc_toolbar_tools_visible");t(this).parent().css("height",t(this).parent().height());t(this).parent().addClass("bt_rc_wrap_drag");t(this).addClass("bt_rc_drag");t(this).find(".bt_rc_item").addClass("bt_rc_drag");t(this).css("width",t(this).width());if(!t(this).hasClass("bt_rc_toggle")){t(this).css("height",t(this).height())}t(this).css("position","fixed");t(this).css("zIndex","100000");t(this).css("opacity",window.bt_rc_drag_opacity);t(this).css("top",bt_rc_mouse.y-bt_rc_mouse.initOffsetY);t(this).css("left",bt_rc_mouse.x-bt_rc_mouse.initOffsetX)})})};bt_rc_item_mousedown();t(document).mouseup(function(_){t(".bt_rc_marker").removeClass("bt_rc_marker");if(window.bt_rc_drag_item!=null){window.bt_rc_dialog.hide();t(".bt_rc_toolbar_tools").css("opacity","");if(window.bt_rc_action!=null&&window.bt_rc_action.startsWith("move")){window.bt_rc_ctrl=_.ctrlKey;bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}window.bt_rc_drag_item.parent().css("height","");window.bt_rc_drag_item.parent().removeClass("bt_rc_wrap_drag");window.bt_rc_drag_item.removeClass("bt_rc_drag");window.bt_rc_drag_item.find(".bt_rc_item").removeClass("bt_rc_drag");window.bt_rc_drag_item.css("position","");window.bt_rc_drag_item.css("zIndex","");window.bt_rc_drag_item.css("opacity","");window.bt_rc_drag_item.css("width","");if(!window.bt_rc_drag_item.hasClass("bt_rc_toggle")){window.bt_rc_drag_item.css("height","")}window.bt_rc_drag_item.css("top","");window.bt_rc_drag_item.css("left","")}window.bt_rc_drag_item=null});t(document).mousemove(function(_){bt_rc_mouse.x=_.clientX;bt_rc_mouse.y=_.clientY;if(window.bt_rc_drag_item!=null){window.bt_rc_drag_item.css("top",bt_rc_mouse.y-bt_rc_mouse.initOffsetY);window.bt_rc_drag_item.css("left",bt_rc_mouse.x-bt_rc_mouse.initOffsetX);var r=bt_rc_get_action();t(".bt_rc_marker").removeClass("bt_rc_marker bt_rc_marker_up bt_rc_marker_down bt_rc_marker_left bt_rc_marker_right bt_rc_marker_inside");if(window.bt_rc_action!=null){if(r[1]=="up"){r[0].addClass("bt_rc_marker bt_rc_marker_up")}else if(r[1]=="down"){r[0].addClass("bt_rc_marker bt_rc_marker_down")}else if(r[1]=="left"){r[0].addClass("bt_rc_marker bt_rc_marker_left")}else if(r[1]=="right"){r[0].addClass("bt_rc_marker bt_rc_marker_right")}else if(r[1]=="inside"){r[0].addClass("bt_rc_marker bt_rc_marker_inside")}}}});t(document).on("mouseover","#bt_rc_dialog",function(_){_.stopPropagation();window.bt_rc_dialog.is_mouseover=true;t(".bt_rc_toolbar_tools_visible").removeClass("bt_rc_toolbar_tools_visible")});t(document).on("mouseleave","#bt_rc_dialog",function(t){window.bt_rc_dialog.is_mouseover=false});t("#bt_rc_add_root i").click(function(t){t.preventDefault();window.bt_rc_action="add_root";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t("#bt_rc_main_toolbar .fa-undo").click(function(t){bt_rc_undo()});t("#bt_rc_main_toolbar .fa-repeat").click(function(t){bt_rc_redo()});t("#bt_rc_main_toolbar .fa-paste").click(function(t){bt_rc_paste_main_toolbar()});t("#bt_rc_main_toolbar .fa-exchange").click(function(t){window.bt_rc_dialog.hide();window.bt_rc_dialog.show("manage_cb")});t("#bt_rc_main_toolbar .bt_rc_sc_mapper").click(function(t){window.bt_rc_dialog.hide();window.bt_rc_dialog.show("sc_mapper")});t("#bt_rc_editor_toolbar .bt_rc_switch_editor").click(function(_){if(window.bt_rc.editor=="rc"){window.bt_rc.editor="wp";window.bt_rc_action="update_wp_editor";bt_rc_dispatch(".bt_rc_item_list","bt_rc_event");t("#postdivrich").removeClass("bt_rc_hidden");t("#rapid_composer_sectionid").hide();t("#postdivrich").hide().show(0);t(this).parent().removeClass("bt_rc_is_rc_editor")}else{if(confirm(window.bt_rc_text.switch_editor_confirm)){window.bt_rc.editor="rc";t("#postdivrich").addClass("bt_rc_hidden");t("#rapid_composer_sectionid").show(0);t(this).parent().addClass("bt_rc_is_rc_editor")}}});t("#bt_rc_main_toolbar .fa-binoculars").click(function(_){t("#post-preview").click()});t("#bt_rc_main_toolbar .fa-upload").click(function(_){t("#publish").click()});window.bt_rc_toolbar=function(){t(document).unbind("keydown.bt_rc");t(document).unbind("keyup.bt_rc");t(".bt_rc_toolbar").unbind("mouseover");t(".bt_rc_toolbar").unbind("mouseout");t(".bt_rc_toolbar i").unbind("mousedown");t(".bt_rc_toolbar i").unbind("click");t(".bt_rc_toolbar i").mousedown(function(t){t.stopPropagation()});t(".bt_rc_toolbar .bt_rc_toggle_button").click(function(_){if(t(this).closest(".bt_rc_item").hasClass("bt_rc_toggle")){t(this).closest(".bt_rc_item").removeClass("bt_rc_toggle");t(this).closest(".bt_rc_item").css("height","");t(this).removeClass("fa-chevron-down");t(this).addClass("fa-chevron-up")}else{t(this).closest(".bt_rc_item").addClass("bt_rc_toggle");t(this).closest(".bt_rc_item").css("height",t(this).parent().height()+window.bt_rc.padding*2);t(this).addClass("fa-chevron-down");t(this).removeClass("fa-chevron-up")}});t(".bt_rc_toolbar .bt_rc_delete").click(function(_){window.bt_rc_action="delete";window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t(".bt_rc_toolbar .bt_rc_add").click(function(_){_.preventDefault();window.bt_rc_dialog.hide();if(t(this).closest(".bt_rc_item").data("container")=="horizontal"){window.bt_rc_action="add_horizontal"}else{window.bt_rc_action="add"}window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");window.bt_rc_base=t(this).closest(".bt_rc_item").data("base");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t(".bt_rc_toolbar .bt_rc_edit").click(function(_){_.preventDefault();window.bt_rc_dialog.hide();window.bt_rc_action="edit";window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");window.bt_rc_base=t(this).closest(".bt_rc_item").data("base");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t(".bt_rc_toolbar .bt_rc_clone").click(function(_){_.preventDefault();window.bt_rc_action="clone";window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t(".bt_rc_toolbar .bt_rc_copy").click(function(_){_.preventDefault();window.bt_rc_action="copy";window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t(".bt_rc_toolbar .bt_rc_copy_plus").click(function(_){_.preventDefault();window.bt_rc_action="copy_plus";window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")});t(".bt_rc_toolbar .bt_rc_paste").click(function(_){_.preventDefault();window.bt_rc_action="paste";window.bt_rc_from=t(this).closest(".bt_rc_item").parent().data("reactid");bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")})};bt_rc_toolbar();bt_rc_init_number_items()});window.bt_rc_get_action=function(){var _=bt_rc_mouse.x;var r=bt_rc_mouse.y;window.bt_rc_action=null;var i=null;var e=null;if(!bt_rc_point_coll(bt_rc_drag_item.parent(),_,r)){var c=bt_rc_get_closest(t(".bt_rc_item").not(".bt_rc_drag"),_,r);if(c!=null){var o=bt_rc_get_position(c);window.bt_rc_from=bt_rc_drag_item.parent().data("reactid");window.bt_rc_to=c.parent().data("reactid");var n=bt_rc_drag_item.data("base");if(o=="inside"){var a=c.data("base");var s=c}else{var a=c.parent().closest(".bt_rc_item").data("base");var s=c.parent().closest(".bt_rc_item")}i=c;var d=false;if(c.parent().parent().hasClass("bt_rc_item_list")&&o!="inside"){if(window.bt_rc_map[n]!==undefined&&window.bt_rc_map[n].root===true){d=true}else{d=false}}else if(window.bt_rc_map[a]===undefined||window.bt_rc_map[a].accept===undefined){d=false}else if(window.bt_rc_map[a].accept[n]===true){d=true}else if(window.bt_rc_map[a].accept[n]===false){d=false}else if(window.bt_rc_map[a].accept_all===true){d=true}else if(window.bt_rc_map[a].accept_all===false){d=false}if(s.find(".bt_rc_horizontal").length>0){if(s.find(".bt_rc_horizontal")[0].children.length>=12){d=false}}if(d){if(o=="down"){window.bt_rc_action="move_down";e="down";if(i.parent().hasClass("bt_rc_width"))e="right"}else if(o=="up"){window.bt_rc_action="move_up";e="up";if(i.parent().hasClass("bt_rc_width"))e="left"}else if(o=="left"){window.bt_rc_action="move_up";e="up";if(i.parent().hasClass("bt_rc_width"))e="left"}else if(o=="right"){window.bt_rc_action="move_down";e="down";if(i.parent().hasClass("bt_rc_width"))e="right"}else if(o=="inside"){window.bt_rc_action="move_inside";e="inside"}}}}var b=[i,e];return b};window.bt_rc_point_coll=function(_,r,i){var e=_.offset().top-t(window).scrollTop();var c=_.offset().left;var o=_.innerWidth();var n=_.innerHeight();return bt_rc_point_coll_base(e,c,o,n,r,i)};window.bt_rc_point_coll_top=function(_,r,i){var e=_.offset().top-t(window).scrollTop();var c=_.offset().left;var o=_.innerWidth();var n=_.find(".bt_rc_toolbar").height()+window.bt_rc.padding*2;return bt_rc_point_coll_base(e,c,o,n,r,i)};window.bt_rc_point_coll_base=function(t,_,r,i,e,c){var o=[_,_,_+r,_+r];var n=[t,t+i,t+i,t];var a=true;var s,d,b;for(var l=0;l<4;l++){if(l==3){s=-(n[0]-n[l]);d=o[0]-o[l];b=-(s*o[l]+d*n[l])}else{s=-(n[l+1]-n[l]);d=o[l+1]-o[l];b=-(s*o[l]+d*n[l])}if(s*e+d*c+b>0){a=false}}return a};window.bt_rc_point_dist=function(_,r,i){var e=_.offset().top-t(window).scrollTop();var c=_.offset().left;var o=e+_.innerHeight();var n=c+_.innerWidth();if(r>c&&r<n){return Math.min(Math.abs(i-e),Math.abs(i-o))}else if(i>e&&i<o){return Math.min(Math.abs(r-c),Math.abs(r-n))}else{return null}};window.bt_rc_get_closest=function(_,r,i){var e=1e5;var c=null;_.each(function(){var _=bt_rc_point_dist(t(this),r,i);if(_!=null&&_<=e){e=_;c=t(this)}});return c};window.bt_rc_get_position=function(_){var r=_.offset().top-t(window).scrollTop();var i=_.offset().left;var e=r+_.innerHeight();var c=i+_.innerWidth();if(bt_rc_mouse.y<r){var o="up"}else if(bt_rc_mouse.y>e){var o="down"}else if(bt_rc_mouse.x<i){var o="left"}else if(bt_rc_mouse.x>c){var o="right"}else{var o="inside"}return o};window.bt_rc_event=function(t){window.bt_rc_action=t;bt_rc_dispatch(".bt_rc_item_list","bt_rc_event")}})(jQuery);var bt_json_encode=function(t){var _=/[\b\t\n\f\r\\\"\/\u00A1-\uFFFF]/g;var r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/"};_.lastIndex=0;return _.test(t)?'"'+t.replace(_,function(t){var _=r[t];return typeof _==="string"?_:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'};if(!String.prototype.startsWith){String.prototype.startsWith=function(t,_){_=_||0;return this.lastIndexOf(t,_)===_}}var bt_rc_create_dom_element=function(t,_){var r=document.createElement(t);var i;for(var e=0;e<_.length;e++){i=document.createAttribute(_[e][0]);i.value=_[e][1];r.setAttributeNode(i)}return r};